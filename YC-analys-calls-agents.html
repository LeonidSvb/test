<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 QCI Agent Analysis Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .metric:last-child {
            border-bottom: none;
        }
        
        .metric-value {
            font-weight: bold;
            color: #27ae60;
        }
        
        .qci-score {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
        }
        
        .qci-excellent { background: #2ecc71; color: white; }
        .qci-good { background: #3498db; color: white; }
        .qci-average { background: #f39c12; color: white; }
        .qci-poor { background: #e74c3c; color: white; }
        
        .agent-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .agent-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .agent-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .agent-name {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .call-analysis {
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .call-header {
            background: #f8f9fa;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .call-content {
            display: none;
            padding: 20px;
            background: white;
        }
        
        .call-content.expanded {
            display: block;
        }
        
        .transcript {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }
        
        .transcript .speaker {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .transcript .agent {
            color: #3498db;
        }
        
        .transcript .customer {
            color: #e74c3c;
        }
        
        .breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .breakdown-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .breakdown-score {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .coaching-tips {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .coaching-tips h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .coaching-tips li {
            margin-bottom: 8px;
            color: #856404;
        }
        
        .improvements {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .improvements h4 {
            color: #155724;
            margin-bottom: 15px;
        }
        
        .improvement-item {
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.7);
            border-radius: 5px;
        }
        
        .priority-high { border-left: 4px solid #e74c3c; }
        .priority-medium { border-left: 4px solid #f39c12; }
        .priority-low { border-left: 4px solid #27ae60; }
        
        .charts-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }
        
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .chart-container h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            color: #7f8c8d;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s ease;
            margin: 5px;
        }
        
        .btn:hover {
            background: #2980b9;
        }
        
        .btn-success { background: #27ae60; }
        .btn-success:hover { background: #219a52; }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-excellent { background: #2ecc71; }
        .status-good { background: #3498db; }
        .status-average { background: #f39c12; }
        .status-poor { background: #e74c3c; }
        
        #loadingSpinner {
            text-align: center;
            padding: 50px;
            display: none;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 QCI Agent Analysis Dashboard</h1>
            <div class="subtitle">Complete Quality Assessment & Improvement Recommendations</div>
            <div style="margin-top: 15px; color: #95a5a6;">
                Analysis Date: <span id="analysisDate"></span> | 
                Total Calls Analyzed: <span id="totalCalls">31</span>
            </div>
        </div>
        
        <div id="loadingSpinner">
            <div class="spinner"></div>
            <div>Loading QCI Analysis Data...</div>
        </div>
        
        <div id="dashboardContent" style="display: none;">
            <!-- Summary Cards -->
            <div class="summary-cards">
                <div class="card">
                    <h3>📊 Overall Performance</h3>
                    <div class="metric">
                        <span>Average QCI Score:</span>
                        <span class="metric-value" id="overallQCI">48.7</span>
                    </div>
                    <div class="metric">
                        <span>Best Performing Agent:</span>
                        <span class="metric-value">Riley (65.0)</span>
                    </div>
                    <div class="metric">
                        <span>Most Improved Potential:</span>
                        <span class="metric-value">BIESSE (+40 pts)</span>
                    </div>
                    <div class="metric">
                        <span>Total Calls Analyzed:</span>
                        <span class="metric-value">31</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>🚀 Improvement Potential</h3>
                    <div class="metric">
                        <span>Expected QCI Increase:</span>
                        <span class="metric-value">+15-25 points</span>
                    </div>
                    <div class="metric">
                        <span>Timeline:</span>
                        <span class="metric-value">2-4 weeks</span>
                    </div>
                    <div class="metric">
                        <span>Conversion Increase:</span>
                        <span class="metric-value">+20-40%</span>
                    </div>
                    <div class="metric">
                        <span>Ready for Implementation:</span>
                        <span class="metric-value">✅ Yes</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>⚠️ Critical Issues</h3>
                    <div class="metric">
                        <span>Agents with QCI < 50:</span>
                        <span class="metric-value" style="color: #e74c3c;">3 of 4</span>
                    </div>
                    <div class="metric">
                        <span>Inconsistent Performance:</span>
                        <span class="metric-value" style="color: #f39c12;">BIESSE (10-85)</span>
                    </div>
                    <div class="metric">
                        <span>Compliance Issues:</span>
                        <span class="metric-value" style="color: #e74c3c;">High</span>
                    </div>
                    <div class="metric">
                        <span>Priority Actions:</span>
                        <span class="metric-value">12 items</span>
                    </div>
                </div>
                
                <div class="card">
                    <h3>💎 Success Patterns</h3>
                    <div class="metric">
                        <span>Best Opening (BIESSE):</span>
                        <span class="metric-value">"20 seconds?" approach</span>
                    </div>
                    <div class="metric">
                        <span>Effective Compliance:</span>
                        <span class="metric-value">Quick recognition</span>
                    </div>
                    <div class="metric">
                        <span>Brand Consistency:</span>
                        <span class="metric-value">Within 10 seconds</span>
                    </div>
                    <div class="metric">
                        <span>Value Proposition:</span>
                        <span class="metric-value">Business operations</span>
                    </div>
                </div>
            </div>
            
            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <h3>QCI Score Distribution by Agent</h3>
                    <canvas id="qciChart" width="400" height="300"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Performance Categories</h3>
                    <canvas id="categoryChart" width="400" height="300"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Improvement Timeline</h3>
                    <canvas id="timelineChart" width="400" height="300"></canvas>
                </div>
                
                <div class="chart-container">
                    <h3>Call Quality Breakdown</h3>
                    <canvas id="breakdownChart" width="400" height="300"></canvas>
                </div>
            </div>
            
            <!-- Agent Details -->
            <div class="agent-details" id="agentDetails">
                <!-- Agent cards will be populated by JavaScript -->
            </div>
        </div>
        
        <div class="footer">
            <h3>🎯 Ready for Implementation</h3>
            <p>All analysis complete. Ready to deploy improvements and track results.</p>
            <a href="#" class="btn btn-success" onclick="generateImplementationPlan()">Generate Implementation Plan</a>
            <a href="#" class="btn" onclick="exportData()">Export Analysis Data</a>
            <a href="#" class="btn" onclick="scheduleReanalysis()">Schedule Re-analysis</a>
        </div>
    </div>
    
    <script>
        // QCI Analysis Data
        const qciData = {
            agents: {
                "YOUNG CAESAR": {
                    id: "1a9692a3-bc41-4d9f-b1db-a45170e9fbfe",
                    name: "YOUNG CAESAR (SDR)",
                    qci: 41.9,
                    range: {min: 18, max: 68},
                    calls: 10,
                    type: "Sales Development Rep",
                    status: "Needs Improvement",
                    bestCall: {
                        qci: 68,
                        transcript: "Hi. This is Victoria Hall from Young Caesar. Am I speaking with hello.",
                        strengths: ["Good brand mention", "Professional tone"],
                        improvements: ["Complete sentences", "Better engagement"]
                    },
                    worstCall: {
                        qci: 18,
                        transcript: "Hi. This is from Young Caesar. Am I speaking with?",
                        issues: ["Incomplete sentence", "No engagement", "Poor execution"]
                    },
                    improvements: {
                        priority: "High",
                        targetQCI: 55,
                        timeline: "2 weeks",
                        actions: [
                            "Fix incomplete opening sentences",
                            "Standardize brand introduction",
                            "Improve customer engagement",
                            "Add compliance training"
                        ]
                    },
                    breakdown: {
                        dynamics: 12,
                        objections_compliance: 8,
                        brand_language: 10,
                        outcome_hygiene: 12
                    }
                },
                "QCADVISOR": {
                    id: "10f76383-d5aa-408d-9aca-3708bb9f8b22",
                    name: "QCADVISOR (Sales)",
                    qci: 43.0,
                    range: {min: 30, max: 60},
                    calls: 10,
                    type: "Sales Representative",
                    status: "Average Performance",
                    bestCall: {
                        qci: 60,
                        transcript: "Professional approach with good structure",
                        strengths: ["Consistent quality", "Good compliance"],
                        improvements: ["Increase engagement", "Better value prop"]
                    },
                    worstCall: {
                        qci: 30,
                        transcript: "Short engagement, early disconnect",
                        issues: ["Poor opening", "No customer engagement"]
                    },
                    improvements: {
                        priority: "Medium",
                        targetQCI: 60,
                        timeline: "3 weeks",
                        actions: [
                            "Enhance value proposition",
                            "Improve closing techniques",
                            "Better objection handling",
                            "Increase call duration"
                        ]
                    },
                    breakdown: {
                        dynamics: 10,
                        objections_compliance: 12,
                        brand_language: 8,
                        outcome_hygiene: 13
                    }
                },
                "BIESSE": {
                    id: "35cd1a47-714b-4436-9a19-34d7f2d00b56",
                    name: "BIESSE (B2B)",
                    qci: 45.0,
                    range: {min: 10, max: 85},
                    calls: 10,
                    type: "B2B Sales",
                    status: "Highly Inconsistent",
                    bestCall: {
                        qci: 85,
                        transcript: "Hi there. A colleague from Biesa. I know you might hate me, because this is a cold call. To hang up? Or give me 20 seconds?",
                        strengths: ["Honest approach", "Gives control to customer", "Time limit", "Excellent engagement"],
                        improvements: ["Scale this approach to all calls"]
                    },
                    worstCall: {
                        qci: 10,
                        transcript: "Hello.",
                        issues: ["Single word response", "No introduction", "Complete failure"]
                    },
                    improvements: {
                        priority: "Critical",
                        targetQCI: 65,
                        timeline: "1 month",
                        actions: [
                            "Adopt QCI=85 approach for all calls",
                            "Remove all calls with QCI < 30",
                            "Intensive coaching on best practices",
                            "Daily performance monitoring"
                        ]
                    },
                    breakdown: {
                        dynamics: 15,
                        objections_compliance: 10,
                        brand_language: 8,
                        outcome_hygiene: 12
                    }
                },
                "Riley": {
                    id: "8cd7551f-2ac8-441d-8f49-0abf053fb9b6",
                    name: "Riley (Appointments)",
                    qci: 65.0,
                    range: {min: 65, max: 65},
                    calls: 1,
                    type: "Appointment Scheduler",
                    status: "Best Performance",
                    bestCall: {
                        qci: 65,
                        transcript: "Professional appointment scheduling approach",
                        strengths: ["Clear structure", "Good compliance", "Professional tone"],
                        improvements: ["Need more data points"]
                    },
                    improvements: {
                        priority: "Low",
                        targetQCI: 75,
                        timeline: "Monitor",
                        actions: [
                            "Collect more call data",
                            "Monitor consistency",
                            "Scale successful approach",
                            "Regular performance checks"
                        ]
                    },
                    breakdown: {
                        dynamics: 20,
                        objections_compliance: 15,
                        brand_language: 15,
                        outcome_hygiene: 15
                    }
                }
            }
        };

        // Initialize Dashboard
        document.addEventListener('DOMContentLoaded', function() {
            showLoadingSpinner();
            
            setTimeout(() => {
                loadDashboardData();
                hideLoadingSpinner();
                createCharts();
                populateAgentDetails();
            }, 1000);
        });

        function showLoadingSpinner() {
            document.getElementById('loadingSpinner').style.display = 'block';
        }

        function hideLoadingSpinner() {
            document.getElementById('loadingSpinner').style.display = 'none';
            document.getElementById('dashboardContent').style.display = 'block';
        }

        function loadDashboardData() {
            document.getElementById('analysisDate').textContent = new Date().toLocaleDateString();
            
            const totalCalls = Object.values(qciData.agents).reduce((sum, agent) => sum + agent.calls, 0);
            const avgQCI = Object.values(qciData.agents).reduce((sum, agent) => sum + agent.qci, 0) / Object.keys(qciData.agents).length;
            
            document.getElementById('totalCalls').textContent = totalCalls;
            document.getElementById('overallQCI').textContent = avgQCI.toFixed(1);
        }

        function createCharts() {
            // QCI Score Chart
            const ctx1 = document.getElementById('qciChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: Object.keys(qciData.agents),
                    datasets: [{
                        label: 'QCI Score',
                        data: Object.values(qciData.agents).map(agent => agent.qci),
                        backgroundColor: [
                            '#e74c3c', // YOUNG CAESAR (poor)
                            '#f39c12', // QCADVISOR (average) 
                            '#f39c12', // BIESSE (average)
                            '#27ae60'  // Riley (good)
                        ],
                        borderWidth: 2,
                        borderColor: '#2c3e50'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'QCI Score'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Category Distribution
            const ctx2 = document.getElementById('categoryChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Excellent (80-100)', 'Good (60-79)', 'Average (40-59)', 'Poor (20-39)', 'Failed (0-19)'],
                    datasets: [{
                        data: [0, 1, 2, 1, 0], // Based on QCI ranges
                        backgroundColor: ['#2ecc71', '#3498db', '#f39c12', '#e74c3c', '#95a5a6']
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });

            // Improvement Timeline
            const ctx3 = document.getElementById('timelineChart').getContext('2d');
            new Chart(ctx3, {
                type: 'line',
                data: {
                    labels: ['Current', '1 Week', '2 Weeks', '3 Weeks', '1 Month'],
                    datasets: [
                        {
                            label: 'YOUNG CAESAR',
                            data: [41.9, 45, 50, 55, 55],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'BIESSE',
                            data: [45.0, 50, 55, 60, 65],
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'QCADVISOR',
                            data: [43.0, 47, 52, 58, 60],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 80,
                            title: {
                                display: true,
                                text: 'Expected QCI Score'
                            }
                        }
                    }
                }
            });

            // Quality Breakdown
            const ctx4 = document.getElementById('breakdownChart').getContext('2d');
            new Chart(ctx4, {
                type: 'radar',
                data: {
                    labels: ['Dynamics', 'Objections & Compliance', 'Brand & Language', 'Outcome & Hygiene'],
                    datasets: Object.keys(qciData.agents).map((agentName, index) => {
                        const colors = ['#e74c3c', '#3498db', '#f39c12', '#27ae60'];
                        const agent = qciData.agents[agentName];
                        return {
                            label: agentName,
                            data: [
                                agent.breakdown.dynamics,
                                agent.breakdown.objections_compliance,
                                agent.breakdown.brand_language,
                                agent.breakdown.outcome_hygiene
                            ],
                            borderColor: colors[index],
                            backgroundColor: colors[index] + '20',
                            pointBackgroundColor: colors[index]
                        };
                    })
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 30
                        }
                    }
                }
            });
        }

        function populateAgentDetails() {
            const container = document.getElementById('agentDetails');
            
            Object.entries(qciData.agents).forEach(([agentName, agent]) => {
                const agentCard = createAgentCard(agentName, agent);
                container.appendChild(agentCard);
            });
        }

        function createAgentCard(agentName, agent) {
            const card = document.createElement('div');
            card.className = 'agent-card';
            
            const statusClass = agent.qci >= 60 ? 'qci-good' : 
                               agent.qci >= 40 ? 'qci-average' : 'qci-poor';
            
            card.innerHTML = `
                <div class="agent-header">
                    <div class="agent-name">${agent.name}</div>
                    <div class="qci-score ${statusClass}">${agent.qci}</div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" onclick="showTab('${agentName}', 'overview')">Overview</div>
                    <div class="tab" onclick="showTab('${agentName}', 'calls')">Best/Worst Calls</div>
                    <div class="tab" onclick="showTab('${agentName}', 'improvements')">Improvements</div>
                </div>
                
                <div id="${agentName}-overview" class="tab-content active">
                    <div class="metric">
                        <span>QCI Range:</span>
                        <span class="metric-value">${agent.range.min} - ${agent.range.max}</span>
                    </div>
                    <div class="metric">
                        <span>Calls Analyzed:</span>
                        <span class="metric-value">${agent.calls}</span>
                    </div>
                    <div class="metric">
                        <span>Agent Type:</span>
                        <span class="metric-value">${agent.type}</span>
                    </div>
                    <div class="metric">
                        <span>Status:</span>
                        <span class="metric-value">${agent.status}</span>
                    </div>
                    
                    <div class="breakdown">
                        <div class="breakdown-item">
                            <div class="breakdown-score">${agent.breakdown.dynamics}</div>
                            <div>Dynamics</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-score">${agent.breakdown.objections_compliance}</div>
                            <div>Compliance</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-score">${agent.breakdown.brand_language}</div>
                            <div>Branding</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="breakdown-score">${agent.breakdown.outcome_hygiene}</div>
                            <div>Outcome</div>
                        </div>
                    </div>
                </div>
                
                <div id="${agentName}-calls" class="tab-content">
                    <div class="call-analysis">
                        <div class="call-header" onclick="toggleCall('${agentName}-best')">
                            <div><strong>🏆 Best Call (QCI: ${agent.bestCall.qci})</strong></div>
                            <div>▼</div>
                        </div>
                        <div id="${agentName}-best" class="call-content">
                            <div class="transcript">
                                <div><span class="speaker agent">Agent:</span> ${agent.bestCall.transcript}</div>
                            </div>
                            <div><strong>Strengths:</strong></div>
                            <ul>
                                ${agent.bestCall.strengths.map(strength => `<li>${strength}</li>`).join('')}
                            </ul>
                            <div><strong>Areas for Scaling:</strong></div>
                            <ul>
                                ${agent.bestCall.improvements.map(improvement => `<li>${improvement}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                    
                    <div class="call-analysis">
                        <div class="call-header" onclick="toggleCall('${agentName}-worst')">
                            <div><strong>⚠️ Worst Call (QCI: ${agent.worstCall.qci})</strong></div>
                            <div>▼</div>
                        </div>
                        <div id="${agentName}-worst" class="call-content">
                            <div class="transcript">
                                <div><span class="speaker agent">Agent:</span> ${agent.worstCall.transcript}</div>
                            </div>
                            <div><strong>Critical Issues:</strong></div>
                            <ul>
                                ${agent.worstCall.issues.map(issue => `<li>${issue}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div id="${agentName}-improvements" class="tab-content">
                    <div class="improvements priority-${agent.improvements.priority.toLowerCase()}">
                        <h4>🎯 Improvement Plan</h4>
                        <div class="metric">
                            <span>Priority Level:</span>
                            <span class="metric-value">${agent.improvements.priority}</span>
                        </div>
                        <div class="metric">
                            <span>Target QCI:</span>
                            <span class="metric-value">${agent.improvements.targetQCI}</span>
                        </div>
                        <div class="metric">
                            <span>Timeline:</span>
                            <span class="metric-value">${agent.improvements.timeline}</span>
                        </div>
                        
                        <h4>📋 Action Items:</h4>
                        ${agent.improvements.actions.map((action, index) => `
                            <div class="improvement-item">
                                <strong>${index + 1}.</strong> ${action}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            return card;
        }

        function showTab(agentName, tabName) {
            // Hide all tab contents for this agent
            document.querySelectorAll(`[id^="${agentName}-"]`).forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(`${agentName}-${tabName}`).classList.add('active');
            
            // Update tab buttons
            const parentCard = document.getElementById(`${agentName}-${tabName}`).closest('.agent-card');
            parentCard.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function toggleCall(callId) {
            const content = document.getElementById(callId);
            const header = content.previousElementSibling;
            const arrow = header.querySelector('div:last-child');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                arrow.textContent = '▼';
            } else {
                content.classList.add('expanded');
                arrow.textContent = '▲';
            }
        }

        function generateImplementationPlan() {
            alert('Implementation plan will be generated with step-by-step instructions for each agent improvement.');
        }

        function exportData() {
            alert('QCI analysis data will be exported to Excel format for further analysis.');
        }

        function scheduleReanalysis() {
            alert('Re-analysis will be scheduled to track improvement progress after implementation.');
        }

        // Auto-refresh data every 30 seconds (in real implementation)
        setInterval(() => {
            console.log('Checking for updated QCI data...');
        }, 30000);
    </script>
</body>
</html>
